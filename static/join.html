<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Вхід за кодом</title>
  <style>
    body { font-family: sans-serif; background:#111; color:#eee; text-align:center; margin-top:100px; }
    input { padding:8px; }
    button { padding:8px 16px; margin-left:5px; }
  </style>
</head>
<body>
  <h2>Введіть ваш ключ доступу</h2>
  <p>Цей сайт доступний лише для запрошених користувачів.</p>

  <input id="k" placeholder="Вставте ключ">
  <button onclick="go()">Увійти</button>
  <p id="err" style="color:#ff6b6b;"></p>

  <script>
    async function go(){
      const v = document.getElementById('k').value.trim();
      if(!v){ alert('Введіть ключ'); return; }
      try{
        const r = await fetch('/auth', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({code: v})
        });
        if(r.ok){
          location.href = '/'; // бекенд вже поставив cookie
        }else{
          document.getElementById('err').textContent =
            'Невірний ключ. Спробуйте ще раз або запитайте власника сайту.';
        }
      }catch(e){
        alert('Помилка мережі. Спробуйте ще раз.');
      }
    }
  </script>
</body>
</html>
